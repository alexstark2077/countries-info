"use strict";const formInput=document.querySelector(".countries__input"),resultsBox=document.querySelector(".countries__results-box"),resultsNum=document.querySelector(".countries__results-title span"),Logic=new App,Visual=new Visuals;function start(){Logic.fetchAllCountries(reactToFetchAllCountries)}function eventsHandler(){Visual.handleFormInput(reactToFormInput)}function reactToFetchAllCountries(e){if(!0===e)return console.log("✅ fetching countries' info: successful!"),void formInput.classList.remove("disabled");console.log(`Error happened: ${e}`)}function reactToFormInput(){return Logic.foundResults=Logic.allCountries.filter((e=>e.name.common.toLowerCase().includes(formInput.value.toLowerCase())||e.name.official.toLowerCase().includes(formInput.value.toLowerCase()))),formInput.value.length>=3&&0===Logic.foundResults.length?(resultsNum.textContent="nothing found...",void(resultsBox.innerHTML="")):0===Logic.foundResults.length?(resultsNum.textContent=0,void(resultsBox.innerHTML="")):(Visual.renderFoundCountries(Logic.foundResults,reactToRenderFoundCountries),resultsNum.textContent=Logic.foundResults.length,getWeather(),getBorders(),void resultsBox.classList.add("active"))}function reactToRenderFoundCountries(){Logic.foundCoords=Logic.foundResults.map((e=>e.capitalInfo.latlng)),Logic.foundBorders=Logic.foundResults.map((e=>e.borders))}function getBorders(){if(!Logic.foundBorders.length)return;const e=Logic.getBordersNames();document.querySelectorAll(".countries__result").forEach(((t,o)=>{t.querySelector(".countries__result-borders .countries__result-value").innerHTML=`${e[o].join(", ")} (${e[o].length})`}))}function getWeather(){Logic.foundCoords.forEach((async(e,t)=>{try{let o,r;if(!Array.isArray(e))return void(document.querySelectorAll(".countries__result")[t].querySelector(".countries__result-capital-weather .countries__result-value").innerText="no info");[o,r]=e;const n=await Logic.fetchWeather(o,r);document.querySelectorAll(".countries__result")[t]&&(document.querySelectorAll(".countries__result")[t].querySelector(".countries__result-capital-weather .countries__result-value").innerText=n+"°C")}catch(e){throw console.error(e),e}}))}start(),eventsHandler();